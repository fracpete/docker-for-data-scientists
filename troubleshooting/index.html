<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Troubleshooting - Docker for Data Scientists</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Troubleshooting";
    var mkdocs_page_input_path = "troubleshooting.md";
    var mkdocs_page_url = "/fracpete/docker-for-data-scientists/troubleshooting/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Docker for Data Scientists</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../basics/">Basics</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../repos/">Repositories</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../dockerfile/">Dockerfile</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../best_practices/">Best practices</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../tips_and_tricks/">Tips & Tricks</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Troubleshooting</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#cuda-not-available-at-build-time">CUDA not available at build time</a></li>
    

    <li class="toctree-l2"><a href="#cuda-architectures-for-pytorch">CUDA architectures for PyTorch</a></li>
    

    <li class="toctree-l2"><a href="#interactive-timezone-prompt">Interactive timezone prompt</a></li>
    

    <li class="toctree-l2"><a href="#missing-shared-library">Missing shared library</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../automation/">Automation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../registry/">Registry</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Docker for Data Scientists</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Troubleshooting</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="cuda-not-available-at-build-time">CUDA not available at build time</h3>
<p>Some deep learning libraries refuse to get installed if there is not CUDA-capable
device available. Of course, you can fix this by defining a <a href="../tips_and_tricks/#default-runtime">default runtime</a>
in your docker configuration. However, this is not an option when your build 
system does not even have a GPU.</p>
<p>Therefore, an alternative is to skip the CUDA device check by inserting the
<code>FORCE_CUDA</code> environment variable in your docker build as follows: </p>
<pre><code>ENV FORCE_CUDA=&quot;1&quot;
</code></pre>
<h3 id="cuda-architectures-for-pytorch">CUDA architectures for PyTorch</h3>
<p>If your container needs to build PyTorch (e.g., if you cannot use a PyTorch base image),
then you can supply the list of NVIDIA architectures via the <code>TORCH_CUDA_ARCH_LIST</code>
environment variable. By using <code>ARG</code>, you can define a default valye and still
override it at build time via the <code>--build-arg</code> option:</p>
<pre><code>ARG TORCH_CUDA_ARCH_LIST=&quot;Kepler;Kepler+Tesla;Maxwell;Maxwell+Tegra;Pascal;Volta;Turing&quot;
ENV TORCH_CUDA_ARCH_LIST=&quot;${TORCH_CUDA_ARCH_LIST}&quot;
</code></pre>
<h3 id="interactive-timezone-prompt">Interactive timezone prompt</h3>
<p>In case you get the following prompt for configuring your timezone data (which will
fail unattended builds):</p>
<pre><code>Configuring tzdata
------------------

Please select the geographic area in which you live. Subsequent configuration
questions will narrow this down by presenting a list of cities, representing
the time zones in which they are located.

 1. Africa      4. Australia  7. Atlantic  10. Pacific  13. Etc
 2. America     5. Arctic     8. Europe    11. SystemV
 3. Antarctica  6. Asia       9. Indian    12. US
Geographic area:
</code></pre>
<p>Then you can precede your command with <code>DEBIAN_FRONTEND=noninteractive</code>.</p>
<p>In case of <code>apt-get</code>, use something like this:</p>
<pre><code class="language-commandline">RUN DEBIAN_FRONTEND=noninteractive apt-get install -y ...
</code></pre>
<p>Or like this:</p>
<pre><code class="language-commandline">RUN export DEBIAN_FRONTEND=noninteractive &amp;&amp; \
    apt-get install -y ...
</code></pre>
<p>Finally, the brute force method is to define it globally via the <code>ENV</code> command:</p>
<pre><code class="language-commandline">ENV DEBIAN_FRONTEND noninteractive
</code></pre>
<h3 id="missing-shared-library">Missing shared library</h3>
<p>A common error that you will encounter is installations via <code>pip</code> failing to a shared
library not being present, similar to this:</p>
<pre><code>error: XYZ.so: cannot open shared object file: No such file or directory
</code></pre>
<p>In order to remedy the problem, you need to determine the package that contains this
shared library. In case of Ubuntu (or Debian) you can use the <em>Ubuntu Packages Search</em>:</p>
<p><a href="https://packages.ubuntu.com/">https://packages.ubuntu.com/</a></p>
<p>On that page, scroll to the <em>Search the contents of packages</em> section and enter
the file name of the missing shared library (e.g., <code>XYZ.so</code>). If you know the
distribution (e.g., <code>bionic</code> release) and architecture (e.g., <code>amd64</code>) then
you can restrict the search further. Finally, click on <em>Search</em>. </p>
<p>From the results page, select the appropriate package name and include that in your 
docker build.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../automation/" class="btn btn-neutral float-right" title="Automation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../tips_and_tricks/" class="btn btn-neutral" title="Tips & Tricks"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../tips_and_tricks/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../automation/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
